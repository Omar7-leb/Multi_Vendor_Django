<!DOCTYPE html>
{% load tailwind_filters %}
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>Sign up</title>
         <link href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/tailwind.min.css" rel="stylesheet">
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB2vNWUWqF7Y5e_Z-3pVHmPOgOL0v5gNzc&libraries=places"></script>

    </head>

    
    <body>
        {% if messages %} 
            {% for message in messages %}
            <div class="notification is-success is-toast">{{ message }}</div>
            {% endfor %} 
        {% endif %}
        <div class="bg-indigo-200 min-h-screen flex flex-col">
            <div class="max-w-5xl mx-auto flex-1 flex flex-col items-center justify-center">
                <div class="bg-blue-100 px-6 py-8 rounded shadow-md text-black w-full">
                    <p class="text-center text-3xl font-bold">SELL ON LOMOFY</p>
                    <p class="text-center font-bold">Open Your Online Store Now</p>
                    <br>
                    <form method="POST" enctype="multipart/form-data">
                            {% csrf_token %}
                            {{ form|crispy }}
                        <div id="map" style="width: 100%; height: 400px;"></div>
                        <input type="hidden" id="id_map_address" name="address">
                        <input type="hidden" id="id_latitude" name="latitude">
                        <input type="hidden" id="id_longitude" name="longitude">
                        <script>
                            function initMap() {
                                const map = new google.maps.Map(document.getElementById('map'), {
                                     center: { lat: 40.7128, lng: -74.0060 },  // Set initial map center
                                    zoom: 15,                   // Set initial zoom level
                                });

                                const marker = new google.maps.Marker({
                                    map: map,
                                    draggable: true,
                                });

                                google.maps.event.addListener(marker, 'dragend', function() {
                                    const position = marker.getPosition();
                                    const latitude = position.lat();
                                    const longitude = position.lng();
                                    const geocoder = new google.maps.Geocoder();

                                    geocoder.geocode({ location: position }, function(results, status) {
                                        if (status === 'OK') {
                                            if (results[0]) {
                                                const address = results[0].formatted_address;
                                                document.getElementById('id_map_address').value = address;
                                                document.getElementById('id_latitude').value = latitude;
                                                document.getElementById('id_longitude').value = longitude;
                                            } else {
                                                console.log('No results found');
                                            }
                                        } else {
                                            console.log('Geocoder failed due to: ' + status);
                                        }
                                    });
                                });
                            }
                        </script>
                        <script>
                            // Initialize the map when the page loads
                            window.addEventListener('load', function() {
                                initMap();
                            });
                        </script>
                        <button
                            type="submit"
                            class="w-full text-center py-3 rounded bg-green-400 text-white hover:bg-green-dark focus:outline-none my-1">
                            Create Account
                        </button>
                    </form>
                
                    <div class="text-center text-sm text-grey-dark mt-4">
                    <input type="checkbox" class="form-checkbox" >
                       I've read and understood Lomofy's 
                       <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>
                        <a class="no-underline border-b border-grey-dark text-grey-dark" href="#">
                            Terms of Service
                        </a> and 
                    </div>

                <div class="text-grey-dark mt-6 pl-7 text-center">
                    Have an account?
                    <a class="no-underline border-b border-blue text-blue-800" 
                    href="{% url 'vendor:vendor_sign_in' %}">Sign In</a>
                </div>
            </div>
        </div>
        </div>
    </body>
</html>