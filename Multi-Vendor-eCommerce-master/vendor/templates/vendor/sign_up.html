<!DOCTYPE html>
{% load tailwind_filters %}
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Sign up</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/tailwind.min.css" rel="stylesheet">
    <style>
        #map {
            height: 400px;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    {% if messages %}
        {% for message in messages %}
            <div class="notification is-success is-toast">{{ message }}</div>
        {% endfor %}
    {% endif %}
    <div class="bg-indigo-200 min-h-screen flex flex-col">
        <div class="max-w-5xl mx-auto flex-1 flex flex-col items-center justify-center">
            <div class="bg-blue-100 px-6 py-8 rounded shadow-md text-black w-full">
                <p class="text-center text-3xl font-bold">SELL ON LOMOFY</p>
                <p class="text-center font-bold">Open Your Online Store Now</p>
                <br>
                <form method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    {{ form|crispy }}

                    <div id="map"></div>


                    <button type="submit" class="w-full text-center py-3 rounded bg-green-400 text-white hover:bg-green-dark focus:outline-none my-1">
                        Create Account
                    </button>
                </form>

                <div class="text-center text-sm text-grey-dark mt-4">
                    <input type="checkbox" class="form-checkbox">
                    I've read and understood Lomofy's
                    <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>
                    <a class="no-underline border-b border-grey-dark text-grey-dark" href="#">
                        Terms of Service
                    </a> and
                </div>

                <div class="text-grey-dark mt-6 pl-7 text-center">
                    Have an account?
                    <a class="no-underline border-b border-blue text-blue-800" href="{% url 'vendor:vendor_sign_in' %}">Sign In</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        function initMap() {
            var lebanonCoordinates = { lat: 33.8547, lng: 35.8623 };  // Coordinates of Lebanon
            var map = new google.maps.Map(document.getElementById('map'), {
                center: lebanonCoordinates,
                zoom: 8
            });

            var marker = new google.maps.Marker({
               position: { lat: 33.8547, lng: 35.8623 },
                map: map,
                draggable: false
            });
            var initialLatitude = marker.getPosition().lat();
            var initialLongitude = marker.getPosition().lng();

            document.getElementById('id_latitude').value = initialLatitude;
            document.getElementById('id_longitude').value = initialLongitude;
            google.maps.event.addListener(map, 'click', function(event) {
                var clickedLocation = event.latLng;
                marker.setPosition(clickedLocation);
                var latitude = event.latLng.lat();
                var longitude = event.latLng.lng();

                document.getElementById('id_latitude').value = latitude;
                document.getElementById('id_longitude').value = longitude;
            });
            // Update the latitude and longitude fields when they are manually edited
            document.getElementById('id_latitude').addEventListener('input', function(event) {
            var latitude = parseFloat(event.target.value);
            if (!isNaN(latitude)) {
                var position = marker.getPosition();
                position.lat(latitude);
                marker.setPosition(position);
            }
        });

            document.getElementById('id_longitude').addEventListener('input', function(event) {
            var longitude = parseFloat(event.target.value);
            if (!isNaN(longitude)) {
                var position = marker.getPosition();
                position.lng(longitude);
                marker.setPosition(position);
            }
        });
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB2vNWUWqF7Y5e_Z-3pVHmPOgOL0v5gNzc&callback=initMap" async defer></script>

</body>
</html>
