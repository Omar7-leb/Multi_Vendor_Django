{% extends 'core/_base.html' %}
{% block title %}Home {% endblock %}
{% load static %}
{% load tailwind_filters %}
{% block body %}
<html>
<head>
    <style>
   .a-dropdown-container {
            position: relative;
            display: inline-block;
          }

          .a-dropdown-container select {
            padding: 8px;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #fff;
            color: #333;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
          }

          .a-dropdown-container select::-ms-expand {
            display: none;
          }

          .a-dropdown-container select:hover {
            border-color: #999;
          }

          .a-dropdown-container select:focus {
            outline: none;
            border-color: #555;
          }

          .a-dropdown-container select option {
            background-color: #fff;
            color: #333;
          }


    </style>
</head>
<body>


{% include 'core/filters.html' %}

<section class="All-product-area padding-bottom">
    <div class="container">
        <div class="row product-btn d-flex justify-content-end align-items-end">
            <!-- Section Tittle -->
            <div class="col-xl-4 col-lg-5 col-md-5">
                <div class="section-tittle mb-30">
                    <h2>Products</h2>
                </div>
            </div>
            <div class="col-xl-8 col-lg-7 col-md-7">
                <div class="properties__button f-right">
                    <!--Nav Button  -->
                    <form method="GET" action="{% url 'products' %}">
                        <span class="a-dropdown-container"><label for="sort-select" class="a-native-dropdown"></label> <select
                                name="sort" onchange="this.form.submit()" id="sort-select" autocomplete="off" tabindex="0"
                                data-action="a-dropdown-select" class="a-native-dropdown a-declarative" aria-pressed="False">

                            <option value="" {% if not request.GET.sort %}selected{% endif %}>Sort by:</option>

                            <option value="featured-rank" {% if request.GET.sort == 'featured-rank' %}selected{% endif %}>Featured</option>

                            <option value="price_asc" {% if request.GET.sort == 'price_asc' %}selected{% endif %}>Price: Low to High</option>

                            <option value="price_desc" {% if request.GET.sort == 'price_desc' %}selected{% endif %}>Price: High to Low</option>

                            <option value="review-rank" {% if request.GET.sort == 'review-rank' %}selected{% endif %}>Avg. Customer Review</option>

                            <option value="date-desc-rank" {% if request.GET.sort == 'date-desc-rank' %}selected{% endif %}>Newest Arrivals</option>

                            <option value="exact-aware-popularity-rank" {% if request.GET.sort == 'exact-aware-popularity-rank' %}selected{% endif %}>Best Sellers</option>

                        </select>
                        </span>
                    </form>

                    <script>
    document.addEventListener("DOMContentLoaded", function() {
        var selectElement = document.getElementById("sort-select");
        var selectedOption = "{{ request.GET.sort }}";
        if (selectedOption) {
            selectElement.value = selectedOption;
        }
    });

    function handleCategoryChange(selectElement) {
        var selectedOption = selectElement.options[selectElement.selectedIndex];
        var category = selectedOption.value;

        // Redirect to the category page based on the selected option value
        window.location.href = '/category/' + category;
    }

                    </script>
                    <!--End Nav Button  -->
                </div>
            </div>
        </div>
        <!-- Nav Card -->
        <div class="tab-content" id="nav-tabContent">
            <!-- card one -->
            <div
                    class="tab-pane fade show active"
                    id="nav-home"
                    role="tabpanel"
                    aria-labelledby="nav-home-tab"
            >
                <div class="row">
                    {% for product in products %}
                    {% include 'product/product_list.html' %}
                    {% endfor %}
                </div>
            </div>
        </div>
        <!-- End Nav Card -->
    </div>
</section>

{% endblock %}
</body>
</html>